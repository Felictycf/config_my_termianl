"use strict";var T=Object.create;var d=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var C=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of _(t))!U.call(e,u)&&u!==r&&d(e,u,{get:()=>t[u],enumerable:!(a=R(t,u))||a.enumerable});return e};var $=(e,t,r)=>(r=e!=null?T(P(e)):{},g(t||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),I=e=>g(d({},"__esModule",{value:!0}),e);var z={};C(z,{default:()=>A});module.exports=I(z);var l=require("@raycast/api");var s=require("@raycast/api");var o=$(require("react")),n=require("@raycast/api");var y=require("react/jsx-runtime");var i=require("fs");var k=require("path");var m=$(require("node:os"),1),f,h;function b(e){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);if(f===void 0&&(f=m.default.homedir()),f&&/^~(?=$|\/|\\)/.test(e))return e.replace(/^~/,f);let t=e.match(/^~([^/\\]+)(.*)/);if(t&&(h===void 0&&(h=m.default.userInfo().username),h)){let r=t[1],a=t[2];if(r===h)return f+a}return e}var L=require("react/jsx-runtime"),c=(0,s.getPreferenceValues)(),w=b(c.downloadsFolder??"~/Downloads"),O=c.showHiddenFiles,D=c.fileOrder,p=c.lastestDownloadOrder,J=c.downloadsLayout??"list";function M(){return(0,i.readdirSync)(w).filter(t=>O||!t.startsWith(".")).map(t=>{let r=(0,k.join)(w,t),a=(0,i.statSync)(r);return{file:t,path:r,lastModifiedAt:a.mtime,createdAt:a.ctime,addedAt:a.atime,birthAt:a.birthtime}}).sort((t,r)=>{switch(D){case"addTime":return r.addedAt.getTime()-t.addedAt.getTime();case"createTime":return r.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function x(){let e=M();if(!(e.length<1))return p==="addTime"?e.sort((t,r)=>r.addedAt.getTime()-t.addedAt.getTime()):p==="createTime"?e.sort((t,r)=>r.createdAt.getTime()-t.createdAt.getTime()):p==="modifiedTime"?e.sort((t,r)=>r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()):p==="birthTime"&&e.sort((t,r)=>r.birthAt.getTime()-t.birthAt.getTime()),e[0]}function v(){try{return(0,i.accessSync)(c.downloadsFolder,i.constants.R_OK),!0}catch(e){return console.error(e),!1}}var S=require("@raycast/api"),E=require("@raycast/api");async function A(){if(!v()){await(0,l.showHUD)("No permission to access the downloads folder");return}let e=x();if(!e){await(0,l.showHUD)("No downloads found");return}await S.Clipboard.copy({file:e.path}),await(0,E.closeMainWindow)(),await(0,l.showHUD)("Copied latest download to clipboard"),await(0,l.popToRoot)()}
