"use strict";var E=Object.create;var d=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of T(t))!_.call(e,u)&&u!==r&&d(e,u,{get:()=>t[u],enumerable:!(a=A(t,u))||a.enumerable});return e};var $=(e,t,r)=>(r=e!=null?E(R(e)):{},g(t||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),U=e=>g(d({},"__esModule",{value:!0}),e);var M={};P(M,{default:()=>S});module.exports=U(M);var s=require("@raycast/api");var o=$(require("react")),n=require("@raycast/api");var y=require("react/jsx-runtime");var i=require("fs");var k=require("path");var m=$(require("node:os"),1),f,h;function b(e){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);if(f===void 0&&(f=m.default.homedir()),f&&/^~(?=$|\/|\\)/.test(e))return e.replace(/^~/,f);let t=e.match(/^~([^/\\]+)(.*)/);if(t&&(h===void 0&&(h=m.default.userInfo().username),h)){let r=t[1],a=t[2];if(r===h)return f+a}return e}var D=require("react/jsx-runtime"),l=(0,s.getPreferenceValues)(),w=b(l.downloadsFolder??"~/Downloads"),C=l.showHiddenFiles,I=l.fileOrder,p=l.lastestDownloadOrder,K=l.downloadsLayout??"list";function O(){return(0,i.readdirSync)(w).filter(t=>C||!t.startsWith(".")).map(t=>{let r=(0,k.join)(w,t),a=(0,i.statSync)(r);return{file:t,path:r,lastModifiedAt:a.mtime,createdAt:a.ctime,addedAt:a.atime,birthAt:a.birthtime}}).sort((t,r)=>{switch(I){case"addTime":return r.addedAt.getTime()-t.addedAt.getTime();case"createTime":return r.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function x(){let e=O();if(!(e.length<1))return p==="addTime"?e.sort((t,r)=>r.addedAt.getTime()-t.addedAt.getTime()):p==="createTime"?e.sort((t,r)=>r.createdAt.getTime()-t.createdAt.getTime()):p==="modifiedTime"?e.sort((t,r)=>r.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()):p==="birthTime"&&e.sort((t,r)=>r.birthAt.getTime()-t.birthAt.getTime()),e[0]}function v(){try{return(0,i.accessSync)(l.downloadsFolder,i.constants.R_OK),!0}catch(e){return console.error(e),!1}}var c=require("@raycast/api");async function S(){if(!v()){await(0,c.showHUD)("No permission to access the downloads folder");return}let e=x();if(!e){await(0,c.showHUD)("No downloads found");return}await(0,c.open)(e.path),await(0,c.popToRoot)()}
